syntax = "proto3";

package sharing;

option go_package = "github.com/datapace/sharing/proto";

import "google/protobuf/empty.proto";

service SharingService {
  rpc UpdateReceivers(Sharing) returns (google.protobuf.Empty) {}
  rpc GetSharingsToGroups(GetSharingsToGroupsRequest) returns (GetSharingsResponse) {}
  rpc GetSharings(GetSharingsRequest) returns (GetSharingsResponse) {}
}

message Receivers {
  oneof versionOption {
    bool versionEmpty = 1;
    uint64 version = 2;
  }
  repeated string groupIds = 3;
  repeated string userIds = 4;
}

message Sharing {
  string sourceUserId = 1;
  string streamId = 2;
  Receivers receivers = 3;
}

message GetSharingsResponse {
  repeated Sharing sharings = 1;
}

message GetSharingsToGroupsRequest {
  repeated string receiverGroupIds = 1;
}

message GetSharingsRequest {
  repeated string receiverGroupIds = 1;
  string receiverUserId = 2;
}
